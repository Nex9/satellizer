(function(){var n,e,t,r={}.hasOwnProperty,o=function(n,e){function t(){this.constructor=n}for(var o in e)r.call(e,o)&&(n[o]=e[o]);return t.prototype=e.prototype,n.prototype=new t,n.__super__=e.prototype,n};e={logoutRedirect:"/",loginRedirect:"/",loginUrl:"/auth/login",signupUrl:"/auth/signup",signupRedirect:"/login",loginRoute:"/login",signupRoute:"/signup",user:"currentUser",tokenName:"satellizerToken"},t={google:{url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:window.location.origin,scope:"openid profile email",scopeDelimiter:" ",requiredUrlParams:["scope"],optionalUrlParams:["display"],display:"popup",type:"2.0",popupOptions:{width:452,height:633}},facebook:{url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/dialog/oauth",redirectUri:window.location.origin+"/",scope:"email",scopeDelimiter:",",requiredUrlParams:["display","scope"],display:"popup",type:"2.0",popupOptions:{width:481,height:269}},linkedin:{url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:window.location.origin,requiredUrlParams:["state"],scope:[],scopeDelimiter:" ",state:"STATE",type:"2.0",popupOptions:{width:527,height:582}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:window.location.origin,scope:[],scopeDelimiter:" ",type:"2.0",popupOptions:{width:1020,height:618}},twitter:{url:"/auth/twitter",type:"1.0"}},n=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}var i,u,a,c,l,p,s,f,d;return o(r,n),i=function(n){function r(){({config:e,providers:t,facebook:function(n){return angular.extend(t.facebook,n)},google:function(n){return angular.extend(t.facebook,n)},linkedin:function(n){return angular.extend(t.linkedin,n)},github:function(n){return angular.extend(t.github,n)},twitter:function(n){return angular.extend(t.twitter,n)},oauthBase:function(n){return t[n.name]=t[n.name]||{},angular.extend(t[n.name],n)},oauth1:function(n){return function(e){return n.oauthBase(e),t[e.name].type="1.0"}}(this),oauth2:function(n){return function(e){return n.oauthBase(e),t[e.name].type="2.0"}}(this),$get:function(n,e,o,i){return r={},r.authenticate=function(r){var u,a;return u=n.defer(),a=1===t[r].type?e:o,a.open(a[r]).then(function(n){return i.parseUser(n.data.token,u)})["catch"](function(n){return u.reject(n)}),u.promise},r.login=function(n){return i.login(n)},r.signup=function(n){return i.signup(n)},r.logout=function(){return i.logout()},r.isAuthenticated=function(){return i.isAuthenticated()},r}})}return o(r,n),r}(Provider),a=function(n){function t(n,t,r,o){var i;return i={},i.parseUser=function(n,t){var i;return i=JSON.parse(window.atob(n.split(".")[1])),localStorage.setItem(e.tokenName,n),r[e.user]=i.user,o.path(e.loginRedirect),t.resolve(i.user)},i.login=function(r){var o;return o=n.defer(),t.post(e.loginUrl,r).then(function(n){return i.parseUser(n.data.token,o)})["catch"](function(n){return o.reject(n)}),o.promise},i.signup=function(r){var i;return i=n.defer(),t.post(e.signupUrl,r).then(function(){return o.path(e.signupRedirect),i.resolve()})["catch"](function(n){return i.reject(n)}),i.promise},i.logout=function(){var t;return t=n.defer(),delete r[e.user],localStorage.removeItem(e.tokenName),o.path(e.logoutRedirect),t.resolve(),t.promise},i.isAuthenticated=function(){return Boolean(r.currentUser)},i}return o(t,n),t}(Factory),l=function(n){function e(n,e,t,r){var o,i;return o={url:null,name:null,scope:null,scopeDelimiter:null,clientId:null,redirectUri:null,popupOptions:null,authorizationEndpoint:null,requiredUrlParams:null,optionalUrlParams:null,defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code"},i={},i.open=function(e){var t,u;return angular.extend(o,e),t=n.defer(),u=i.buildUrl(),r.open(u,o.popupOptions).then(function(n){return i.exchangeForToken(n).then(function(n){return t.resolve(n)})["catch"](function(n){return t.reject(n)})})["catch"](function(n){return t.reject(n)}),t.promise},i.exchangeForToken=function(n){return e.post(o,url,{code:n.code,clientId:o.clientId,redirectUri:o.redirectUri})},i.buildUrl=function(){var n,e;return n=o.authorizationEndpoint,e=i.buildQueryString(),[n,e].join("?")},i.buildQueryString=function(){var n,e;return n=[],e=["defaultUrlParams","requiredUrlParams","optionalUrlParams"],angular.forEach(e,function(e){return angular.forEach(o[e],function(e){var r,i;return r=t.camelCase(e),i=o[r],n.push([e,encodeURIComponent(i)])})}),n.map(function(n){return n.join("=")}).join("&")},i}return o(e,n),e}(Factory),c=function(n){function e(n,e,t){var r,o;return r={url:null,name:null,popupOptions:null},o={},o.open=function(e){var i;return angular.extend(r,e),i=n.defer(),t.open(r.url).then(function(n){return o.exchangeForToken(n).then(function(n){return i.resolve(n.data)})}),i.promise},o.exchangeForToken=function(n){return n=o.buildQueryString(n),e.get(r.url+"?"+n)},o.buildQueryString=function(n){var e;return e=[],angular.forEach(n,function(n,t){return e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}),e.join("&")},o}return o(e,n),e}(Factory),p=function(n){function e(n,e,t){var r,o,i;return i=null,r=null,o={},o.open=function(e,r){var u,a;return u=n.defer(),a=o.stringifyOptions(o.prepareOptions(r||{})),i=t.open(e,"_blank",a),i.focus(),o.postMessageHandler(u),o.pollPopup(u),u.promise},o.pollPopup=function(n){return r=e(function(){return i.closed?(e.cancel(r),n.reject({data:"Authorization Failed"})):void 0},35)},o.postMessageHandler=function(n){return t.addEventListener("message",function(e){return e.origin===t.location.origin?(i.close(),e.data.error?n.reject({data:e.data.error}):n.resolve(e.data)):void 0})},o.prepareOptions=function(n){var e,r;return r=n.width||500,e=n.height||500,angular.extend({width:r,height:e,left:t.screenX+(t.outerWidth-r)/2,top:t.screenY+(t.outerHeight-e)/2.5},n)},o.stringifyOptions=function(n){var e;return e=[],angular.forEach(n,function(n,t){return e.push(t+"="+n)}),e.join(",")},o}return o(e,n),e}(factory),s=function(n){function t(n,t,r,o){return{run:function(){var i,u,a,c;if(c=t.localStorage[e.tokenName],c&&(u=SON.parse(t.atob(c.split(".")[1])),n[e.user]=u.user),i=t.location.search.substring(1),a=Object.keys(r.search()).length?r.search():o.parseQueryString(i),t.opener&&t.opener.location.origin===t.location.origin){if(a.oauth_token&&a.oauth_verifier)return t.opener.postMessage({oauth_token:a.oauth_token,oauth_verifier:a.oauth_verifier},t.location.origin);if(a.code)return t.opener.postMessage({code:a.code},t.location.origin);if(a.error)return t.opener.postMessage({error:a.error},t.location.origin)}}}}return o(t,n),t}(Factory),f=function(n){function e(){this.camelCase=function(n){return n.replace(/([\:\-\_]+(.))/g,function(n,e,t,r){return r&&t.toUpperCase(),t})},this.parseQueryString=function(n){var e;return e={},angular.forEach((n||"").split("&"),function(n){var t,r;return n?(r=n.split("="),t=decodeURIComponent(r[0]),e[t]=angular.isDefined(r[1])?decodeURIComponent(r[1]):!0):void 0}),e}}return o(e,n),e}(Service),u=function(n){function t(n){n.interceptors.push(function(n,t,r){return{request:function(n){return t.localStorage[n.tokenName]&&(n.headers.Authorization="Bearer"+t.lcalStorage[n.tokenName]),n},responseError:function(o){return 401===o.status&&(delete t.localStorage[e.tokenName],r.path(e.loginRoute)),n.reject(o)}}})}return o(t,n),t}(e),d=function(n){function e(n){n.run()}return o(e,n),e}(Run),r}(Module)}).call(this);